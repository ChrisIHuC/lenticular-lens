(function(e){function t(t){for(var a,i,s=t[0],l=t[1],c=t[2],d=0,_=[];d<s.length;d++)i=s[d],n[i]&&_.push(n[i][0]),n[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(_.length)_.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],a=!0,s=1;s<o.length;s++){var l=o[s];0!==n[l]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=o[0]))}return e}var a={},n={app:0},r=[];function i(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=a,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(o,a,function(t){return e[t]}.bind(null,a));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("1d50")},"1d50":function(e,t,o){"use strict";o.r(t);o("dd7d"),o("1e97"),o("a6de"),o("252f");var a=o("2f3b"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container",attrs:{id:"app"}},[o("h1",[e._v("Golden Agents Reconciliation")]),o("form",{attrs:{action:"",method:"post"},on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[o("div",{attrs:{id:"resources"}},[o("h2",[e._v("Collections")]),e._l(e.resources,function(t,a){return o("resource-component",{key:t.id,attrs:{resource:t,datasets:e.datasets,resources:e.resources},on:{remove:function(t){e.resources.splice(a,1)}}})}),o("div",{staticClass:"form-group mt-4"},[o("button",{staticClass:"add-resource form-control btn btn-success w-25",attrs:{type:"button"},on:{click:e.addResource}},[e._v("\n                    + Add Collection\n                ")])])],2),o("div",{staticClass:"mt-5",attrs:{id:"matches"}},[o("h2",[e._v("Alignment Mappings")]),e._l(e.matches,function(t,a){return o("match-component",{key:t.id,attrs:{match:t,matches:e.matches,datasets:e.datasets,resources:e.resources},on:{remove:function(t){e.matches.splice(a,1)}}})}),o("div",{staticClass:"form-group mt-4"},[o("button",{staticClass:"form-control btn btn-success w-25",attrs:{type:"button"},on:{click:e.addMatch}},[e._v("\n                    + Add Alignment Mapping\n                ")])])],2),o("div",{staticClass:"form-group row align-items-end"},[o("label",{staticClass:"col-auto",attrs:{for:"limit-all"}},[e._v("Only use a sample of this amount of records for all resources (-1 is no limit):")]),o("input",{directives:[{name:"model",rawName:"v-model.number",value:e.limit_all,expression:"limit_all",modifiers:{number:!0}}],staticClass:"form-control col-1",attrs:{type:"number",min:"-1",id:"limit-all"},domProps:{value:e.limit_all},on:{input:function(t){t.target.composing||(e.limit_all=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),o("div",{staticClass:"col-1"},[o("button",{staticClass:"form-control btn btn-info",attrs:{type:"button"},on:{click:e.applyLimitAll}},[e._v("Apply")])])]),e._m(0),e.job_data?o("div",[o("div",[e._v("\n                Request received at: "+e._s(e.job_data.requested_at)+"\n            ")]),o("div",[e._v("\n                Status: "+e._s(e.job_data.status)+"\n            ")]),e.job_data.processing_at?o("div",[e._v("\n                Processing started at: "+e._s(e.job_data.processing_at)+"\n            ")]):e._e(),e.job_data.finished_at?o("div",[e._v("\n                Processing finished at: "+e._s(e.job_data.finished_at)+"\n                "),e._l(e.matches,function(t){return o("div",[o("a",{attrs:{href:"/job/"+e.job_id+"/result/"+t.label,target:"_blank"}},[e._v("Results for "+e._s(t.label))])])})],2):e._e()]):e._e()])])},r=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"form-group mt-5"},[o("button",{staticClass:"form-control btn btn-success w-25",attrs:{type:"submit"}},[e._v("\n                Generate JSON\n            ")])])}],i=(o("0a29"),o("769a"),o("36bc"),o("ee38"),o("4a44"),o("ece2"),o("f9e3"),o("2dd8"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"border p-4 mt-4 bg-light"},[o("div",{staticClass:"row justify-content-between"},[o("div",{staticClass:"form-group col-3"},[o("label",{attrs:{for:"resource_label_"+e.resource.id}},[e._v("Collection label")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.label_input,expression:"label_input"}],staticClass:"form-control",attrs:{id:"resource_label_"+e.resource.id,placeholder:e.resource_label},domProps:{value:e.label_input},on:{input:function(t){t.target.composing||(e.label_input=t.target.value)}}})]),o("div",{staticClass:"form-group col-1"},[o("button",{staticClass:"ml-3 btn btn-danger",attrs:{type:"button"},on:{click:function(t){e.$emit("remove")}}},[o("octicon",{attrs:{name:"trashcan"}})],1)])]),o("div",{staticClass:"row"},[o("div",{staticClass:"form-group col-8"},[o("label",{attrs:{for:"dataset_"+e.resource.id}},[e._v("Dataset")]),o("select",{directives:[{name:"model",rawName:"v-model",value:e.resource.dataset_id,expression:"resource.dataset_id"}],staticClass:"form-control",attrs:{id:"dataset_"+e.resource.id},on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.resource,"dataset_id",t.target.multiple?o:o[0])},function(t){e.resource.collection_id=""}]}},[o("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Choose a dataset")]),e._l(e.datasets,function(t,a){return o("option",{domProps:{value:a}},[e._v(e._s(a))])})],2)]),""!=e.resource.dataset_id?o("div",{staticClass:"form-group collection-input col-4"},[o("label",{attrs:{for:"collection_"+e.resource.id}},[e._v("Subset")]),o("select",{directives:[{name:"model",rawName:"v-model",value:e.resource.collection_id,expression:"resource.collection_id"}],staticClass:"form-control",attrs:{id:"collection_"+e.resource.id},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.resource,"collection_id",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Choose a subset")]),e._l(e.datasets[e.resource.dataset_id],function(t,a){return o("option",{domProps:{value:a}},[e._v(e._s(a))])})],2)]):e._e()]),""!=e.resource.collection_id?o("div",[o("h3",[e._v("Relations")]),e.resource.related.length>0?o("div",{staticClass:"form-group form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.resource.related_array,expression:"resource.related_array"}],staticClass:"form-check-input",attrs:{id:e.resource.label+"related_array",type:"checkbox"},domProps:{checked:Array.isArray(e.resource.related_array)?e._i(e.resource.related_array,null)>-1:e.resource.related_array},on:{change:function(t){var o=e.resource.related_array,a=t.target,n=!!a.checked;if(Array.isArray(o)){var r=null,i=e._i(o,r);a.checked?i<0&&e.$set(e.resource,"related_array",o.concat([r])):i>-1&&e.$set(e.resource,"related_array",o.slice(0,i).concat(o.slice(i+1)))}else e.$set(e.resource,"related_array",n)}}}),o("label",{staticClass:"form-check-label",attrs:{for:e.resource.label+"related_array"}},[e._v("Use relations as combined source")])]):e._e(),e._l(e.resource.related,function(t,a){return o("div",{staticClass:"row"},[o("div",{staticClass:"form-group col-4"},[o("label",{attrs:{for:"resource_"+e.resource.id+"_related_"+t.id+"_resource"}},[e._v("Related collection")]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.resource,expression:"relation.resource"}],staticClass:"form-control",attrs:{id:"resource_"+e.resource.id+"_related_"+t.id+"_resource"},on:{change:function(o){var a=Array.prototype.filter.call(o.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(t,"resource",o.target.multiple?a:a[0])}}},[o("option",{attrs:{disabled:"",selected:"",value:""}},[e._v("Choose a collection")]),e._l(e.resources,function(t,a){return t.id!=e.resource.id?o("option",{domProps:{value:t.id}},[e._v(e._s(t.label))]):e._e()})],2)]),t.resource>0?o("div",{staticClass:"form-group col-4"},[o("label",{attrs:{for:"resource_"+e.resource.id+"_related_"+t.id+"_local_property"}},[e._v("Local property")]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.local_property,expression:"relation.local_property"}],staticClass:"form-control",on:{change:function(o){var a=Array.prototype.filter.call(o.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(t,"local_property",o.target.multiple?a:a[0])}}},[o("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Select local property")]),e._l(e.datasets[e.resource.dataset_id][e.resource.collection_id],function(t,a){return o("option",{domProps:{value:a}},[e._v(e._s(a))])})],2)]):e._e(),t.resource>0?o("div",{staticClass:"form-group col-3"},[o("label",{attrs:{for:"resource_"+e.resource.id+"_related_"+t.id+"_remote_property"}},[e._v("Remote property")]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.remote_property,expression:"relation.remote_property"}],staticClass:"form-control",on:{change:function(o){var a=Array.prototype.filter.call(o.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(t,"remote_property",o.target.multiple?a:a[0])}}},[o("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Select remote property")]),e._l(e.get_properties_for_resource(t.resource),function(t,a){return o("option",{domProps:{value:a}},[e._v(e._s(a))])})],2)]):e._e(),o("div",{staticClass:"form-group col-1 align-self-end"},[o("button",{staticClass:"ml-3 btn btn-danger",attrs:{type:"button"},on:{click:function(t){e.resource.related.splice(a,1)}}},[o("octicon",{attrs:{name:"trashcan"}})],1)])])}),o("div",{staticClass:"form-group"},[o("button",{staticClass:"form-control btn btn-success w-25",attrs:{type:"button"},on:{click:function(t){e.addRelation(t)}}},[e._v("+ Add relation")])])],2):e._e(),""!=e.resource.collection_id?o("div",{staticClass:"form-group"},[o("h3",[e._v("Filter")]),o("select",{directives:[{name:"model",rawName:"v-model",value:e.resource.filter.type,expression:"resource.filter.type"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.resource.filter,"type",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"",selected:""}},[e._v("No filter")]),o("option",{attrs:{value:"AND"}},[e._v("All conditions must be met (AND)")]),o("option",{attrs:{value:"OR"}},[e._v("At least one of the conditions must be met (OR)")])])]):e._e(),e._l(e.resource.filter.conditions,function(t,a){return""!=e.resource.filter.type?o("filter-condition-component",{key:a,attrs:{datasets:e.datasets,condition:t,index:a,resource_id:e.resource.id,resources:e.resources}}):e._e()}),o("div",{staticClass:"form-group"},[""!=e.resource.filter.type?o("button",{staticClass:"add-resource form-control btn btn-success w-25",attrs:{type:"button"},on:{click:function(t){e.addFilterCondition(t)}}},[e._v("+ Add condition")]):e._e()]),o("h3",[e._v("Sample")]),o("div",{staticClass:"form-group row align-items-end"},[o("label",{staticClass:"col-auto",attrs:{for:"resource_"+e.resource.id+"_limit"}},[e._v("Only use a sample of this amount of records (-1 is no limit):")]),o("input",{directives:[{name:"model",rawName:"v-model.number",value:e.resource.limit,expression:"resource.limit",modifiers:{number:!0}}],staticClass:"form-control col-1",attrs:{type:"number",min:"-1",id:"resource_"+e.resource.id+"_limit"},domProps:{value:e.resource.limit},on:{input:function(t){t.target.composing||e.$set(e.resource,"limit",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})])],2)}),s=[],l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"row"},[o("div",{staticClass:"form-group col-3"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.condition.type,expression:"condition.type"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.condition,"type",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("Choose a filter type")]),o("option",{attrs:{value:"="}},[e._v("=")]),o("option",{attrs:{value:"!="}},[e._v("!=")]),o("option",{attrs:{value:"date_is_within"}},[e._v("date is within")]),o("option",{attrs:{value:"appearances"}},[e._v("appearances of property")])])]),o("div",{staticClass:"form-group col-2"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.condition.property[0],expression:"condition.property[0]"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.condition.property,0,t.target.multiple?o:o[0])}}},e._l(e.resources,function(t){return o("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.label))])}),0)]),o("div",{staticClass:"form-group col-3"},[e.condition.property[0]>0?o("select",{directives:[{name:"model",rawName:"v-model",value:e.condition.property[1],expression:"condition.property[1]"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.condition.property,1,t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Choose a property")]),e._l(e.properties,function(t,a){return o("option",{domProps:{value:a}},[e._v(e._s(a))])})],2):e._e()]),["=","!=","date_is_within"].indexOf(e.condition.type)>-1?o("div",{staticClass:"form-group col-2"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.condition.value,expression:"condition.value"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter a value"},domProps:{value:e.condition.value},on:{input:function(t){t.target.composing||e.$set(e.condition,"value",t.target.value)}}})]):e._e(),"appearances"==e.condition.type?o("div",{staticClass:"form-group col-2"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.condition.value_type,expression:"condition.value_type"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.condition,"value_type",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"max",selected:""}},[e._v("Max.")])])]):e._e(),"appearances"==e.condition.type?o("div",{staticClass:"form-group col-1"},[o("input",{directives:[{name:"model",rawName:"v-model.number",value:e.condition.value,expression:"condition.value",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",min:"0",step:"1"},domProps:{value:e.condition.value},on:{input:function(t){t.target.composing||e.$set(e.condition,"value",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]):e._e(),o("div",{staticClass:"form-group col-1"},[o("button",{staticClass:"ml-3 btn btn-danger",attrs:{type:"button"},on:{click:function(t){e.resource.filter.conditions.splice(e.index,1)}}},[o("octicon",{attrs:{name:"trashcan"}})],1)])])},c=[],u={computed:{properties:function(){var e=this.get_resource_by_id(this.condition.property[0]);return this.datasets[e.dataset_id][e.collection_id]},resource:function(){return this.get_resource_by_id(this.resource_id)}},methods:{get_resource_by_id:function(e){for(var t=0;t<this.resources.length;t++)if(this.resources[t].id==e)return this.resources[t]}},props:["condition","resource_id","index","datasets","resources"]},d=u,_=o("2fdd"),m=Object(_["a"])(d,l,c,!1,null,null,null);m.options.__file="ResourceFilterCondition.vue";var f=m.exports,p={components:{"filter-condition-component":f},computed:{resource_label:function(){return""==this.label_input&&(this.label_input=this.resource.label),""==this.label_input?"[Collection "+this.resource.id+"]":this.label_input}},data:function(){return{label_input:""}},props:["resource","datasets","resources","index"],methods:{addFilterCondition:function(e){e&&e.target.blur();var t={type:"",property:[this.resource.id,""]};this.resource.filter.conditions.push(t)},addRelation:function(e){e&&e.target.blur();var t={resource:"",local_property:"",remote_property:""};this.resource.related.push(t)},get_properties_for_resource:function(e){for(var t,o=0;o<this.resources.length;o++)this.resources[o].id==e&&(t=this.resources[o]);return this.datasets[t.dataset_id][t.collection_id]}},mounted:function(){this.original_filter=this.filter,this.resource.filter.conditions.length<1&&this.addFilterCondition(),this.resource.label=this.resource_label},watch:{label_input:function(){this.$set(this.resource,"label",this.resource_label),this.resources.reverse(),this.resources.reverse()}}},v=p,h=Object(_["a"])(v,i,s,!1,null,null,null);h.options.__file="Resource.vue";var g=h.exports,b=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"border p-4 mt-4 bg-light"},[o("div",{staticClass:"row justify-content-between"},[o("div",{staticClass:"form-group col-3"},[o("label",{attrs:{for:"match_"+e.match.id+"_label"}},[e._v("Mapping label")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.label_input,expression:"label_input"}],staticClass:"form-control",attrs:{id:"'match_' + match.id + '_label'",placeholder:e.match_label},domProps:{value:e.label_input},on:{input:function(t){t.target.composing||(e.label_input=t.target.value)}}})]),o("div",{staticClass:"form-group col-1"},[o("button",{staticClass:"ml-3 btn btn-danger",attrs:{type:"button"},on:{click:function(t){e.$emit("remove")}}},[o("octicon",{attrs:{name:"trashcan"}})],1)])]),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("h3",[e._v("Sources")]),e._l(e.match.sources,function(t,a){return o("match-resource-component",{attrs:{match:e.match,match_resource:t,datasets:e.datasets,resources:e.resources},on:{remove:function(t){e.match.sources.splice(a,1)}}})}),o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-success w-25 form-control",attrs:{type:"button"},on:{click:function(t){e.addMatchResource(e.match.sources,e.sources_count,t)}}},[e._v("+ Add source")])])],2)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("h3",[e._v("Targets")]),e._l(e.match.targets,function(t,a){return o("match-resource-component",{attrs:{match:e.match,match_resource:t,datasets:e.datasets,resources:e.resources},on:{remove:function(t){e.match.targets.splice(a,1)}}})}),o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-success w-25 form-control",attrs:{type:"button"},on:{click:function(t){e.addMatchResource(e.match.targets,e.targets_count,t)}}},[e._v("+ Add target")])])],2)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("h3",[e._v("Conditions")]),o("div",{staticClass:"form-group"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.match.conditions.type,expression:"match.conditions.type"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.match.conditions,"type",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"AND"}},[e._v("All conditions must be met (AND)")]),o("option",{attrs:{value:"OR"}},[e._v("At least one of the conditions must be met (OR)")])])]),e._l(e.match.conditions.items,function(t,a){return o("match-condition",{attrs:{condition:t,matching_field_labels:e.matching_field_labels},on:{remove:function(t){e.match.conditions.items.splice(a,1)}}})}),o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-success w-25 form-control",attrs:{type:"button"},on:{click:function(t){e.addCondition(t)}}},[e._v("+ Add condition")])])],2)])])},y=[],C=(o("ac59"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"bg-white pt-3 pb-3 row border-top mb-3"},[o("div",{staticClass:"col"},[o("div",{staticClass:"row justify-content-between"},[o("div",{staticClass:"form-group col-3"},[o("label",{attrs:{for:"match_"+e.match.id+"_resource_label_"+e.match_resource.id}},[e._v("Collection to use")]),o("select",{directives:[{name:"model",rawName:"v-model",value:e.match_resource.resource,expression:"match_resource.resource"}],staticClass:"form-control",attrs:{id:"match_"+e.match.id+"_resource_label_"+e.match_resource.id},on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.match_resource,"resource",t.target.multiple?o:o[0])},e.handleResourceChange]}},[o("option",{attrs:{disabled:"",selected:"",value:""}},[e._v("Choose a collection")]),e._l(e.resources,function(t,a){return-1===e.match.sources.indexOf(t.id)?o("option",{domProps:{value:t.id}},[e._v(e._s(t.label))]):e._e()})],2)]),o("div",{staticClass:"form-group col-1"},[o("button",{staticClass:"ml-3 btn btn-danger",attrs:{type:"button"},on:{click:function(t){e.$emit("remove")}}},[o("octicon",{attrs:{name:"trashcan"}})],1)])]),e._l(e.match_resource.matching_fields,function(t,a){return o("matching-field-component",{attrs:{matching_field:t,datasets:e.datasets,resources:e.resources,match_id:e.match.id,resource_id:e.match_resource.resource},on:{remove:function(t){e.match_resource.matching_fields.splice(a,1)}}})}),o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-success w-25 form-control",attrs:{type:"button"},on:{click:function(t){e.addMatchingField(t)}}},[e._v("+ Add Matching Field")])])],2)])}),w=[],j=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"border-top pb-3 pt-3"},[o("div",{staticClass:"row justify-content-between"},[o("div",{staticClass:"form-group col-2"},[o("label",{attrs:{for:e.unique_id+"_label"}},[e._v("Field label")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.matching_field.label,expression:"matching_field.label"}],staticClass:"form-control",attrs:{type:"text",id:e.unique_id+"_label"},domProps:{value:e.matching_field.label},on:{input:function(t){t.target.composing||e.$set(e.matching_field,"label",t.target.value)}}})]),o("div",{staticClass:"form-group col-1"},[o("button",{staticClass:"ml-3 btn btn-danger",attrs:{type:"button"},on:{click:function(t){e.$emit("remove")}}},[o("octicon",{attrs:{name:"trashcan"}})],1)])]),o("matching-field-value-component",{key:e.unique_id,attrs:{matching_field_value:e.matching_field.value,datasets:e.datasets,resources:e.resources,resource_id:e.resource_id,unique_id:e.unique_id}}),e._l(e.matching_field.value.transformers,function(t,a){return o("div",{staticClass:"col-4"},[o("div",{staticClass:"row"},[o("div",{staticClass:"form-group col-8"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.matching_field.value.transformers[a],expression:"matching_field.value.transformers[index]"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.matching_field.value.transformers,a,t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Select a function")]),e._l(e.transformers,function(t){return o("option",{domProps:{value:t}},[e._v(e._s(t))])})],2)]),o("div",{staticClass:"form-group"},[o("button",{staticClass:"ml-3 btn btn-danger",attrs:{type:"button"},on:{click:function(t){e.matching_field.value.transformers.splice(a,1)}}},[o("octicon",{attrs:{name:"trashcan"}})],1)])])])}),o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-success w-25 form-control",attrs:{type:"button"},on:{click:function(t){e.addTransformer(t)}}},[e._v("+ Add Transformer")])])],2)},x=[],$={data:function(){return{transformers:["ecartico_full_name","to_date_immutable"],unique_id:"match_"+this.match_id+"_resource_"+this.resource_id+"_field_"+this.matching_field.id}},methods:{addTransformer:function(e){e&&e.target.blur(),this.matching_field.value.transformers.push("")}},mounted:function(){"number"!==typeof this.matching_field.value.property[0]&&(this.matching_field.value.property[0]=this.resource_id)},props:{matching_field:{value:{property:["",""],transformers:[],value_type:"",function_name:""}},datasets:{},resources:{},match_id:"",resource_id:""}},N=$,k=Object(_["a"])(N,j,x,!1,null,null,null);k.options.__file="MatchingField.vue";var O=k.exports,A={components:{"matching-field-component":O},data:function(){return{matching_fields:[],matching_fields_count:0}},methods:{addMatchingField:function(e){e&&e.target.blur(),this.matching_fields_count++;var t={id:this.matching_fields_count,value:{property:[this.match_resource.resource,""],transformers:[],value_type:"",function_name:""}};this.match_resource.matching_fields.push(t)},handleResourceChange:function(){0==this.matching_fields_count&&this.addMatchingField()}},mounted:function(){this.matching_fields_count=this.matching_fields.length},props:["match","match_resource","datasets","resources"]},S=A,q=Object(_["a"])(S,C,w,!1,null,null,null);q.options.__file="MatchResource.vue";var E=q.exports,I=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"row"},[o("div",{staticClass:"form-group col-4"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.condition.matching_field,expression:"condition.matching_field"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.condition,"matching_field",t.target.multiple?o:o[0])}}},[o("option",{attrs:{disabled:"",selected:"",value:""}},[e._v("Select a Matching Field")]),e._l(e.matching_field_labels,function(t,a){return o("option",{domProps:{value:a}},[e._v(e._s(t))])})],2)]),o("div",{staticClass:"form-group col-3"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.condition.method_index,expression:"condition.method_index"}],staticClass:"form-control",on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.condition,"method_index",t.target.multiple?o:o[0])},e.handleMethodIndexChange]}},[o("option",{attrs:{disabled:"",selected:"",value:""}},[e._v("Select a method")]),e._l(e.matching_methods,function(t,a){return o("option",{domProps:{value:a}},[e._v(e._s(t.label))])})],2)]),e.condition.method_index>0&&"object"===typeof e.condition.method?o("div",{staticClass:"col-4"},[Array.isArray(e.condition.method[e.method_object.name])?o("div",{staticClass:"row"},e._l(e.condition.method[e.method_object.name],function(t,a){return o("div",{staticClass:"col"},["number"===typeof t?o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model.number",value:e.condition.method[e.method_object.name][a],expression:"condition.method[method_object.name][index]",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.condition.method[e.method_object.name][a]},on:{input:function(t){t.target.composing||e.$set(e.condition.method[e.method_object.name],a,e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]):e._e(),"matching_label"===t.type?o("div",{staticClass:"form-group"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.condition.method[e.method_object.name][a].value,expression:"condition.method[method_object.name][index].value"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.condition.method[e.method_object.name][a],"value",t.target.multiple?o:o[0])}}},[o("option",{attrs:{disabled:"",selected:"",value:""}},[e._v("Select a Mapping")]),e._l(e.$parent.matches,function(t){return o("option",{domProps:{value:t.id}},[e._v(e._s(t.label))])})],2)]):e._e()])}),0):e._e()]):e._e(),o("div",{staticClass:"form-group col-1"},[o("button",{staticClass:"ml-3 btn btn-danger",attrs:{type:"button"},on:{click:function(t){e.$emit("remove")}}},[o("octicon",{attrs:{name:"trashcan"}})],1)])])},P=[],R=(o("8e67"),{computed:{method_object:function(){return this.matching_methods[this.condition.method_index].object}},data:function(){return{matching_methods:[{label:"=",object:"="},{label:"Distance is between",object:{name:"DISTANCE_IS_BETWEEN",value:{type:[],listItems:{type:0,maxItems:2,minItems:2}}}},{label:"Is a Match in Set:",object:{name:"IS_IN_SET",value:{type:[],listItems:{type:{type:"matching_label"},maxItems:1,minItems:1}}}}]}},methods:{handleMethodIndexChange:function(){if("string"===typeof this.method_object)this.condition.method=this.method_object;else if(this.condition.method={},this.condition.method[this.method_object.name]=JSON.parse(JSON.stringify(this.method_object.value.type)),this.method_object.value.listItems)for(var e=0;e<this.method_object.value.listItems.minItems;e++)this.condition.method[this.method_object.name].push(this.method_object.value.listItems.type)}},props:["condition","matching_field_labels"]}),M=R,J=Object(_["a"])(M,I,P,!1,null,null,null);J.options.__file="MatchCondition.vue";var F=J.exports,D={components:{"match-resource-component":E,"match-condition":F},computed:{match_label:function(){return""==this.label_input&&(this.label_input=this.match.label),""==this.label_input?"[Mapping "+this.match.id+"]":this.label_input},matching_field_labels:function(){var e=[];return this.match.sources[0].matching_fields.forEach(function(t){e.push(t.label)}),this.match.matching_field_labels=e,e}},data:function(){return{label_input:"",sources_count:0,targets_count:0,conditions_count:0}},props:["match","matches","datasets","resources"],methods:{addCondition:function(e){e&&e.target.blur(),this.conditions_count++;var t={id:this.conditions_count,matching_field:"",method:""};this.match.conditions.items.push(t)},addMatchResource:function(e,t,o){o&&o.target.blur(),t++;var a={id:t,matching_fields:[]};e.push(a)}},mounted:function(){this.match.label=this.match_label,this.sources_count=this.match.sources.length,this.sources_count<1&&this.addMatchResource(this.match.sources,this.sources_count),this.targets_count=this.match.targets.length,this.conditions_count=this.match.conditions.items.length,this.conditions_count<1&&this.addCondition()},watch:{label_input:function(){this.$set(this.match,"label",this.match_label),this.matches.reverse(),this.matches.reverse()}}},T=D,L=Object(_["a"])(T,b,y,!1,null,null,null);L.options.__file="Match.vue";var B=L.exports,V={name:"app",components:{"resource-component":g,"match-component":B},data:function(){return{datasets:[],job_id:"",job_data:null,resources:[],resources_count:0,limit_all:-1,matches:[],matches_count:0}},methods:{addFilterCondition:function(e){var t={type:"",property:""};e.filter.conditions.push(t)},addResource:function(e){e&&e.target.blur(),this.resources_count++;var t={dataset_id:"",collection_id:"",id:this.resources_count,filter:{type:"",conditions:[]},limit:-1,related:[],related_array:!1};this.resources.push(t)},addMatch:function(e){e&&e.target.blur(),this.matches_count++;var t={id:this.matches_count,sources:[],targets:[],conditions:{type:"AND",items:[]}};this.matches.push(t)},applyLimitAll:function(){var e=this;this.resources.forEach(function(t){e.$set(t,"limit",e.limit_all)})},getDatasets:function(){var e=this,t=this;fetch("/datasets").then(function(e){return e.json()}).then(function(o){t.datasets=o,e.addResource(),e.addMatch(),e.resources_count=e.resources.length,e.matches_count=e.matches.length})},getJobData:function(){var e=this;""!==this.job_id&&fetch("/job/"+this.job_id).then(function(e){return e.json()}).then(function(t){e.job_data=t,"Finished"!==e.job_data.status&&setTimeout(e.getJobData,5e3)})},getMatchById:function(e){for(var t=0;t<this.matches.length;t++)if(this.matches[t].id==e)return this.matches[t]},getResourceById:function(e){for(var t=0;t<this.resources.length;t++)if(this.resources[t].id==e)return this.resources[t]},submitForm:function(){var e=this,t=this;function o(e,a){"property"===e.value_type&&(a.property=[t.getResourceById(e.property[0]).label.toLowerCase(),e.property[1].toLowerCase()]);var n=["","function_name","property","transformers","value_type"];return"function"===e.value_type&&(Array.isArray(e[e.function_name])?(a[e.function_name]=[],e[e.function_name].forEach(function(t){var n={};a[e.function_name].push(o(t,n))})):(a[e.function_name]={},""===e[e.function_name].value_type?Object.keys(e[e.function_name]).forEach(function(t){n.indexOf(t)<0&&(a[e.function_name][t]={},a[e.function_name][t]=o(e[e.function_name][t],a[e.function_name][t]))}):a[e.function_name]=o(e[e.function_name],a[e.function_name]))),""===e.value_type&&Object.keys(e).forEach(function(t){n.indexOf(t)<0&&(a[t]={},a[t]=o(e[t],a[t]))}),e.transformers&&e.transformers.length>0&&(a.transformers=e.transformers),a}var a=[];this.resources.forEach(function(t){var o=JSON.parse(JSON.stringify(t));""!=o.filter.type?o.filter.conditions.forEach(function(t){t.property[0]=e.getResourceById(t.property[0]).label,t.property[1]=t.property[1].toLowerCase(),"undefined"!==typeof t.value_type&&(t[t.value_type]=t.value,delete t.value,delete t.value_type)}):delete o.filter,o.related.forEach(function(t){t.resource=e.getResourceById(t.resource).label,t.local_property=[t.local_property.toLowerCase()],t.remote_property=[t.remote_property.toLowerCase()],delete t.resource_index}),o.related_array&&(o.related=[o.related]),delete o.related_array,delete o.id,a.push(o)});var n=[];this.matches.forEach(function(t){var a={label:t.label,sources:[],targets:[],conditions:[]};t.sources.forEach(function(t){if(t.resource){var n={resource:e.getResourceById(t.resource).label,matching_fields:[]};t.matching_fields.forEach(function(e){var t={label:e.label};"function"===e.value.value_type?(t.value={},t.value=o(e.value,t.value)):t=o(e.value,t),n.matching_fields.push(t)}),a.sources.push(n)}}),t.targets.forEach(function(t){if(t.resource){var n={resource:e.getResourceById(t.resource).label,matching_fields:[]};t.matching_fields.forEach(function(e){var t={label:e.label};"function"===e.value.value_type?(t.value={},t.value=o(e.value,t.value),t.transformers=JSON.parse(JSON.stringify(t.value.transformers)),delete t.value.transformers):t=o(e.value,t),n.matching_fields.push(t)}),a.targets.push(n)}}),0===a.targets.length&&delete a.targets,a.conditions={type:t.conditions.type,items:[]},t.conditions.items.forEach(function(o){if(""!==o.matching_field){var n={matching_field:t.matching_field_labels[o.matching_field]};"string"===typeof o.method?n.method=o.method:(n.method={},Object.keys(o.method).forEach(function(t){n.method[t]=[],o.method[t].forEach(function(o){"matching_label"===o.type?n.method[t].push(e.getMatchById(o.value).label):n.method[t].push(JSON.parse(JSON.stringify(o)))})})),a.conditions.items.push(n)}}),n.push(a)});var r={resources:a,matches:n,resources_original:this.resources,matches_original:this.matches};fetch("/handle_json_upload/",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(t){e.$set(e,"job_id",t.job_id),e.getJobData()})}},mounted:function(){this.getDatasets()}},U=V,G=Object(_["a"])(U,n,r,!1,null,null,null);G.options.__file="config_form.vue";var W=G.exports,H=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container-fluid",attrs:{id:"app"}},[o("h1",[e._v('Linksets created by alignment mapping "'+e._s(e.mapping_name)+'" ('+e._s(e.rows_total)+" total)")]),e.rows.length>0?o("div",{staticClass:"row"},[e._l(e.rows[0],function(t,a){return o("div",{staticClass:"col font-weight-bold pb-2"},[e._v("\n            "+e._s(a)+"\n        ")])}),e._l(e.rows,function(t){return e._t("default",[o("div",{staticClass:"w-100"}),e._l(t,function(t){return o("div",{staticClass:"col",staticStyle:{overflow:"hidden"}},[e._v("\n                "+e._s(t)+"\n            ")])})])})],2):e._e()])},z=[],K={data:function(){return{mapping_name:"",rows:[],rows_total:""}},methods:{getRows:function(){var e=this;fetch(window.location.href,{headers:{Accept:"application/json"}}).then(function(e){return e.json()}).then(function(t){e.mapping_name=t.mapping_name,e.rows=t.rows,e.rows_total=t.rows_total})}},mounted:function(){this.getRows()}},Q=K,X=Object(_["a"])(Q,H,z,!1,null,null,null);X.options.__file="Results.vue";var Y=X.exports,Z=o("8ab8"),ee=(o("886f"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"p-3 border-left"},[o("div",{staticClass:"form-check form-check-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.matching_field_value.value_type,expression:"matching_field_value.value_type"}],staticClass:"form-check-input",attrs:{type:"radio",id:e.unique_id+"_value_type_property",name:e.unique_id+"_value_type",value:"property"},domProps:{checked:e._q(e.matching_field_value.value_type,"property")},on:{change:function(t){e.$set(e.matching_field_value,"value_type","property")}}}),o("label",{staticClass:"form-check-label",attrs:{for:e.unique_id+"_value_type_property"}},[e._v("Property")])]),o("div",{staticClass:"form-check form-check-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.matching_field_value.value_type,expression:"matching_field_value.value_type"}],staticClass:"form-check-input",attrs:{type:"radio",id:e.unique_id+"_value_type_function",name:e.unique_id+"_value_type",value:"function"},domProps:{checked:e._q(e.matching_field_value.value_type,"function")},on:{change:function(t){e.$set(e.matching_field_value,"value_type","function")}}}),o("label",{staticClass:"form-check-label",attrs:{for:e.unique_id+"_value_type_function"}},[e._v("Calculated value")])]),o("div",{staticClass:"row"},[""==e.matching_field_value.value_type?o("div",{staticClass:"col-3"}):e._e(),"property"==e.matching_field_value.value_type?o("div",{staticClass:"col-3"},[o("div",{staticClass:"form-group"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.matching_field_value.property[0],expression:"matching_field_value.property[0]"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.matching_field_value.property,0,t.target.multiple?o:o[0])}}},e._l(e.resources,function(t){return o("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.label))])}),0)]),o("div",{staticClass:"form-group"},[e.matching_field_value.property[0]>0?o("select",{directives:[{name:"model",rawName:"v-model",value:e.matching_field_value.property[1],expression:"matching_field_value.property[1]"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.matching_field_value.property,1,t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Select a property")]),e._l(e.properties,function(t,a){return o("option",{domProps:{value:a}},[e._v(e._s(a))])})],2):e._e()])]):e._e(),"function"==e.matching_field_value.value_type?o("div",{staticClass:"form-group col-3"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.matching_field_value.function_name,expression:"matching_field_value.function_name"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.matching_field_value,"function_name",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Select a function")]),e._l(e.sql_value_functions,function(t,a){return""!=a?o("option",{domProps:{value:a}},[e._v(e._s(t.label))]):e._e()})],2)]):e._e(),e.removable?o("div",{staticClass:"form-group col-1"},[o("button",{staticClass:"ml-3 btn btn-danger",attrs:{type:"button"},on:{click:function(t){e.$emit("remove")}}},[o("octicon",{attrs:{name:"trashcan"}})],1)]):e._e()]),e._l(e.sql_value_functions[e.function_name].fields,function(t,a){return""!=e.function_name?o("div",[o("label",[e._v(e._s(a))]),"boolean"==t?o("matching-field-boolean-component",{key:e.unique_id+"_"+e.function_name+"_"+a,attrs:{datasets:e.datasets,resources:e.resources,sql_boolean_functions:e.sql_boolean_functions,function_name:e.function_name,field_name:a,matching_field_value:e.matching_field_value[e.function_name][a],resource_id:e.resource_id,unique_id:e.unique_id+"_"+e.function_name+"_"+a}}):e._e(),"value"==t?o("matching-field-value-component",{key:e.unique_id+"_field_"+a,attrs:{datasets:e.datasets,resources:e.resources,matching_field_value:e.matching_field_value[e.function_name][a],resource_id:e.resource_id,unique_id:e.unique_id+"_field_"+a}}):e._e()],1):e._e()}),Array.isArray(e.matching_field_value[e.function_name])?o("div",e._l(e.matching_field_value[e.function_name],function(t,a){return o("matching-field-value-component",{key:e.unique_id+"_value_item_"+a,attrs:{datasets:e.datasets,resources:e.resources,matching_field_value:t,resource_id:e.resource_id,unique_id:e.unique_id+"_value_item_"+a,removable:!0},on:{remove:function(t){e.matching_field_value[e.function_name].splice(a,1)}}})}),1):e._e(),e.sql_value_functions[e.function_name].array_items?o("button",{staticClass:"btn btn-success w-25",attrs:{type:"button"},on:{click:function(t){e.addValueItem()}}},[e._v("+ Add Value")]):e._e()],2)}),te=[],oe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"p-3 border-left"},[o("div",{staticClass:"form-group col-3"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.matching_field_value.function_name,expression:"matching_field_value.function_name"}],staticClass:"form-control",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.matching_field_value,"function_name",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Select a function")]),e._l(e.sql_boolean_functions,function(t,a){return""!=a?o("option",{domProps:{value:a}},[e._v(e._s(t.label)+"\n            ")]):e._e()})],2)]),""!=e.matching_field_value.function_name?o("div",e._l(e.sql_boolean_functions[e.matching_field_value.function_name].fields,function(t,a){return"value"==t?o("matching-field-value-component",{key:e.unique_id+"_field_"+a+"_"+e.matching_field_value.function_name,attrs:{datasets:e.datasets,resources:e.resources,matching_field_value:e.matching_field_value[e.matching_field_value.function_name],resource_id:e.resource_id,unique_id:e.unique_id+"_field_"+a+"_"+e.matching_field_value.function_name}}):e._e()}),1):e._e()])},ae=[],ne={mounted:function(){var e=this,t={property:[this.resource_id,""],transformers:[],value_type:""};Object.keys(this.$parent.sql_value_functions).forEach(function(o){"undefined"===typeof e.matching_field_value[o]&&(e.$parent.sql_value_functions[o].array_items?(e.$set(e.matching_field_value,o,[]),e.$parent.addValueItem(o),e.$parent.addValueItem(o)):e.$set(e.matching_field_value,o,JSON.parse(JSON.stringify(t))));var a=e.$parent.sql_value_functions[o].fields;Object.keys(a).forEach(function(n){"undefined"===typeof e.matching_field_value[o][n]&&e.$set(e.matching_field_value[o],n,JSON.parse(JSON.stringify(t))),"boolean"==a[n]&&Object.keys(e.sql_boolean_functions).forEach(function(a){"undefined"===typeof e.matching_field_value[o][n][a]&&e.$set(e.matching_field_value[o][n],a,JSON.parse(JSON.stringify(t)))})})}),this.$set(this.matching_field_value,"value_type","function")},name:"matching-field-boolean-component",props:["datasets","resources","matching_field_value","resource_id","unique_id","function_name","field_name","sql_boolean_functions"]},re=ne,ie=Object(_["a"])(re,oe,ae,!1,null,null,null);ie.options.__file="MatchingFieldBoolean.vue";var se=ie.exports,le={components:{MatchingFieldBooleanComponent:se},computed:{function_name:function(){return this.matching_field_value.function_name},properties:function(){var e=this.get_resource_by_id(this.matching_field_value.property[0]);return this.datasets[e.dataset_id][e.collection_id]}},data:function(){return{empty_matching_field_value:{property:[this.resource_id,""],transformers:[],value_type:"",function_name:""},sql_boolean_functions:{"":{label:"",fields:[]},IS_URI:{label:"Is URI (starts with 'http')",fields:{"":"value"}}},sql_value_functions:{"":{label:"",fields:[]},IF:{label:"IF",fields:{condition:"boolean",THEN:"value",ELSE:"value"}},MIN_VALUE:{label:"Lowest value in list",array_items:"value",fields:[]}},sub_function_name:""}},methods:{addValueItem:function(e,t){e||(e=this.matching_field_value.function_name),t&&t.target.blur();var o={property:[this.resource_id,""],transformers:[],value_type:"",function_name:""};this.matching_field_value[e].push(o)},get_resource_by_id:function(e){for(var t=0;t<this.resources.length;t++)if(this.resources[t].id==e)return this.resources[t]}},mounted:function(){var e=this,t={property:[this.resource_id,""],transformers:[],value_type:"",function_name:""};Object.keys(this.sql_value_functions).forEach(function(o){"undefined"===typeof e.matching_field_value[o]&&(e.sql_value_functions[o].array_items?(e.$set(e.matching_field_value,o,[]),e.addValueItem(o),e.addValueItem(o)):e.$set(e.matching_field_value,o,JSON.parse(JSON.stringify(t))));var a=e.sql_value_functions[o].fields;Object.keys(a).forEach(function(n){"undefined"===typeof e.matching_field_value[o][n]&&e.$set(e.matching_field_value[o],n,JSON.parse(JSON.stringify(t))),"boolean"==a[n]&&Object.keys(e.sql_boolean_functions).forEach(function(a){"undefined"===typeof e.matching_field_value[o][n][a]&&e.$set(e.matching_field_value[o][n],a,JSON.parse(JSON.stringify(t)))})})})},name:"matching-field-value-component",props:{datasets:{},matching_field_value:{},removable:!1,resources:{},resource_id:"",unique_id:""}},ce=le,ue=Object(_["a"])(ce,ee,te,!1,null,null,null);ue.options.__file="MatchingFieldValue.vue";var de=ue.exports;a["a"].component("octicon",Z["a"]),a["a"].component("matching-field-value-component",de),new a["a"]({computed:{ViewComponent:function(){return this.currentRoute.startsWith("/job")?Y:W}},data:{currentRoute:window.location.pathname},render:function(e){return e(this.ViewComponent)}}).$mount("#app")}});
//# sourceMappingURL=app.38a8e949.js.map